<!DOCTYPE html>
<html>
<head>
    <title>Enigma Simulator</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #222; color: #0f0; text-align: center; margin-top: 50px; }
        img { width: 200px; height: 200px; border: 5px solid #444; border-radius: 10px; margin: 20px; object-fit: contain; background: white; }
        input { padding: 10px; font-size: 1.2em; width: 300px; }
        button { padding: 10px 20px; font-size: 1.2em; cursor: pointer; margin: 5px; font-weight: bold; }
        .encrypt-btn { background-color: #ff4444; color: white; border: none; }
        .decrypt-btn { background-color: #44ff44; color: black; border: none; }
        #result { font-size: 2em; margin-top: 30px; font-weight: bold; min-height: 1.5em; color: yellow; }
    </style>
</head>
<body>
    <h1>TOP SECRET: ENIGMA MACHINE</h1>

    <img id="enigmaImage" src="unlocked.png" alt="Status">
    
    <br>
    <input type="text" id="inputText" placeholder="Skriv hemligt meddelande...">
    <br><br>
    
    <button class="encrypt-btn" onclick="process('encrypt')">LOCK & ENCRYPT</button>
    <button class="decrypt-btn" onclick="process('decrypt')">UNLOCK & DECRYPT</button>

    <div id="result"></div>

    <script>
        async function process(action) {
            // Hämta texten från rutan
            const inputVal = document.getElementById('inputText').value;
            
            // Om rutan är tom, gör inget
            if (!inputVal) return;

            // Anropa vårt C# API
            const response = await fetch(`/${action}?text=${encodeURIComponent(inputVal)}`);
            const data = await response.text();

            // Visa resultatet
            document.getElementById('result').innerText = data;

            // Byt bild och färg beroende på vad vi gjorde
            const img = document.getElementById('enigmaImage');
            
            if (action === 'encrypt') {
                img.src = 'locked.png';
                img.style.borderColor = "red";
                // Rensa inputfältet för effekt
                document.getElementById('inputText').value = "";
            } else {
                img.src = 'unlocked.png';
                img.style.borderColor = "#0f0";
            }
        }
    </script>
</body>
</html>